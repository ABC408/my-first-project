# 贪吃蛇游戏技术设计方案

## 1. 项目概述

本项目是一个基于HTML5 Canvas和JavaScript实现的经典贪吃蛇游戏。游戏具有完整的控制、碰撞检测、食物生成和难度递增机制。

## 2. 技术栈

- HTML5 Canvas：游戏渲染
- JavaScript：游戏逻辑实现
- CSS：界面样式

## 3. 核心功能

### 3.1 游戏规则
- 玩家控制蛇在游戏区域内移动
- 蛇吃到食物后身体增长，得分增加
- 蛇头撞到墙壁或自身身体则游戏结束
- 随着得分增加，游戏难度逐渐提升

### 3.2 控制方式
- 键盘方向键控制移动方向
- 空格键暂停/继续游戏
- 回车键重新开始游戏

## 4. 架构设计

### 4.1 文件结构
```
snake-game/
├── index.html
├── css/
│   └── style.css
├── js/
│   ├── game.js
│   ├── snake.js
│   ├── food.js
│   └── utils.js
└── README.md
```

### 4.2 组件设计

#### Game类 (game.js)
- 管理游戏状态（初始化、运行、暂停、结束）
- 控制游戏主循环
- 协调Snake和Food组件
- 处理用户输入

#### Snake类 (snake.js)
- 管理蛇的身体节点坐标
- 实现蛇的移动逻辑
- 处理蛇的生长机制
- 绘制蛇到Canvas

#### Food类 (food.js)
- 随机生成食物位置
- 确保食物不在蛇身上
- 绘制食物到Canvas

## 5. 核心算法

### 5.1 碰撞检测
- 边界检测：检查蛇头是否超出Canvas边界
- 自身检测：检查蛇头是否与身体节点重叠

### 5.2 食物生成
- 随机生成坐标点
- 验证坐标点不在蛇身范围内
- 保证食物在游戏区域内

### 5.3 难度递增
- 根据得分调整游戏循环间隔
- 间隔时间随得分增加而减少
- 设置最小间隔时间防止游戏过快

## 6. 游戏状态管理

- INIT: 初始化状态
- READY: 准备就绪
- PLAYING: 游戏进行中
- PAUSED: 游戏暂停
- GAME_OVER: 游戏结束

## 7. 用户界面

### 7.1 游戏区域
- Canvas画布显示游戏内容
- 网格化背景便于定位

### 7.2 信息显示区
- 实时得分显示
- 游戏状态提示
- 最高得分记录

### 7.3 控制按钮
- 开始/暂停按钮
- 重新开始按钮
- 移动端方向控制按钮

## 8. 性能优化

- 使用requestAnimationFrame优化绘制性能
- 维护可用位置列表优化食物生成
- 避免不必要的重复计算